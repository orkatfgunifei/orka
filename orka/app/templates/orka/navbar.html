{% set menu = appbuilder.menu %}
{% set languages = appbuilder.languages %}
<header class="main-header">
    <!-- Logo -->
    <a href="#" class="logo">
        <!-- mini logo for sidebar mini 50x50 pixels -->
        <span class="logo-mini"><b>O</b>rka</span>
        <!-- logo for regular state and mobile devices -->
        <span class="logo-lg"><b>Orka</b></span>
    </a>

    <!-- Header Navbar: style can be found in header.less -->
    <nav class="navbar navbar-static-top">
        <!-- Sidebar toggle button-->
        <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
        </a>
        <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
                {% macro locale_menu(languages) %}
                {% set locale = session['locale'] %}
                {% if not locale %}
                    {% set locale = 'en' %}
                {% endif %}
                <li class="dropdown tasks-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="fa fa-flag-o"></i>
                        <span class="label label-danger">{{languages[locale].get('flag')}}</span>
                    </a>
                    {#    <a class="dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">#}
                    {#       <div class="f16"><i class="flag {{languages[locale].get('flag')}}"></i><b class="caret"></b>#}
                    {#       </div>#}
                    {#    </a>#}
                    {% if languages.keys()|length > 1 %}
                        <ul class="dropdown-menu">
                            <li class="header">Selected: {{languages[locale].get('flag')}}</li>
                            <li>
                                {#<!-- inner menu: contains the actual data -->#}
                                <div class="slimScrollDiv" style="position: relative; overflow: hidden; width: auto; height: 200px;" >
                                    <ul class="menu" style="overflow: hidden; width: 100%; height: 200px;">
                                        {% for lang in languages %}
                                            <li>
                                                {% if lang != locale %}
                                                    <a tabindex="-1" href="{{appbuilder.get_url_for_locale(lang)}}">
                                                        <div class="f16"><i class="flag {{languages[lang].get('flag')}}"></i> - {{languages[lang].get('name')}}
                                                        </div>
                                                    </a>
                                                {% endif %}
                                            </li>
                                        {% endfor %}
                                    </ul>
                                    <div class="slimScrollBar" style="background: rgb(0, 0, 0); width: 3px; position: absolute; top: 0px; opacity: 0.4; display: block; border-radius: 7px; z-index: 99; right: 1px;"></div>
                                    <div class="slimScrollRail" style="width: 3px; height: 100%; position: absolute; top: 0px; display: none; border-radius: 7px; background: rgb(51, 51, 51); opacity: 0.2; z-index: 90; right: 1px;"></div>
                                </div>
                            </li>
                        </ul>
                    {% endif %}
                </li>
                {% endmacro %}

                {{ locale_menu(languages) }}
                {% if not current_user.is_anonymous() %}
                <li class="dropdown user user-menu" >
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <img src="" class="user-image" alt="User Image">
                        <span class="hidden-xs">{{g.user.get_full_name()}}</span>
                    </a>
                    <ul class="dropdown-menu">
                        <!-- User image -->
                        <li class="user-header">
                            <img src="" class="img-circle" alt="User Image">
                            {#dist/img/user2-160x160.jpg#}
                            <p>
                                Diogo Matos - Web Developer
                                <small>Member since Nov. 2016</small>
                            </p>
                        </li>
                        <!-- Menu Body -->
                        <li class="user-body">
                            <div class="row">
                                <div class="col-xs-6 text-center">
                                    <a href="{{appbuilder.get_url_for_userinfo}}">{{_("Profile")}}</a>
                                </div>
                                <div class="col-xs-6 text-center">
                                    <a href="{{appbuilder.get_url_for_logout}}">{{_("Logout")}}</a>
                                </div>
                            </div>
                            <!-- /.row -->
                        </li>
                        <!-- Menu Footer-->
                        <li class="user-footer">
                            <div class="pull-left">
                                <a href="#" class="btn btn-default btn-flat">{{_("Profile")}}</a>
                            </div>
                            <div class="pull-right">
                                <a href="#" class="btn btn-default btn-flat">{{_("Logout")}}</a>
                            </div>
                        </li>
                    </ul>
                </li>
                {% else %}
                <li>
                    <a href="{{appbuilder.get_url_for_login}}" class="btn btn-default btn-flat">
                        <i class="fa fa-fw fa-sign-in"></i>{{_("Login")}}</a>
                </li>
                {% endif %}
                <!-- Control Sidebar Toggle Button -->
                <li>
                    <a href="#" data-toggle="control-sidebar"><i class="fa fa-gears"></i></a>
                </li>
            </ul>
        </div>
    </nav>
</header>


{#<nav class="navbar {{menu.extra_classes}} navbar-fixed-top" style="border-radius: 0 !important;" role="navigation">#}
{#   <div class="container">#}
{#        <div class="navbar-header">#}

{#            {% if appbuilder.app_icon %}#}
{#                  <a class="" style="position: absolute" href="{{appbuilder.get_url_for_index}}">#}
{#                  <img style="max-height: 44px; padding-top:6px;padding-left: 28%;" src="{{appbuilder.app_icon}}" >#}
{#                  </a>#}
{#            {% else %}#}
{#                <span class="navbar-brand">#}
{#                <a href="{{appbuilder.get_url_for_index}}">#}
{#                {{ appbuilder.app_name }}#}
{#                </a>#}
{#                </span>#}
{#            {% endif %}#}
{#        </div>#}
{#        <div class="navbar-collapse collapse">#}
{#            <ul class="nav navbar-nav navbar-right">#}
{#                {% include 'orka/navbar_right.html' %}#}
{#            </ul>#}
{#        </div>#}
{#   </div>#}
{#</nav>#}
